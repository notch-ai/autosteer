# Fetch Tracing & Caching Configuration
# Enable HTTP request tracing and caching for debugging and performance
# When enabled, logs all fetch requests/responses and cache HIT/MISS events
# All logs go to: ~/.autosteer/sessions/*-fetch-trace.log
# Logs include: correlation ID, method, URL, duration, status, headers (with redaction), cache events

# Enable fetch tracing (true/false)
# Default: false
# Performance: Zero overhead when disabled, <5ms overhead when enabled
FETCH_TRACE_ENABLED=false

# Comma-separated URL patterns to include in trace
# Default: empty (trace everything when includes/excludes not specified)
# Supports regex patterns or substring matching
# Examples:
#   - anthropic\.com (trace only Anthropic API)
#   - anthropic\.com,openai\.com (trace multiple APIs)
#   - gitmcp\.io (trace GitMCP requests)
#   - .* (trace all requests)
# Note: If both INCLUDES and EXCLUDES are empty, traces all requests
FETCH_TRACE_INCLUDES=

# Comma-separated URL patterns to exclude from trace
# Default: empty (exclude nothing)
# Supports regex patterns or substring matching
# Examples:
#   - /health,/ping (exclude health check endpoints)
#   - localhost (exclude local requests)
#   - /stream,/sse (exclude streaming endpoints)
# Note: Excludes take precedence over includes
FETCH_TRACE_EXCLUDES=

# Debug logging to stderr (true/false)
# Default: false
# When enabled, also writes logs to stderr in addition to file
FETCH_TRACE_DEBUG=false

# Fetch Cache Configuration
# Enable in-memory LRU cache for HTTP requests to improve performance
# Cache uses hash-based keys (method + url + body) for deduplication
# Respects Cache-Control headers and excludes streaming/auth endpoints

# Enable fetch caching (true/false)
# Default: false
# Performance: >90% response time improvement for cache hits
FETCH_CACHE_ENABLED=false

# Maximum number of cached entries (LRU eviction)
# Default: 1000
# Memory: ~50KB per entry, ~50MB for 1000 entries
FETCH_CACHE_MAX_SIZE=1000

# Cache time-to-live in seconds
# Default: 21600 (6 hours)
# Range: 60 (1 min) to 86400 (24 hours)
FETCH_CACHE_TTL=21600

# Ignore Cache-Control headers (no-cache, no-store) from server responses
# Default: true (cache everything regardless of headers, only skip errors)
# Set to false to respect server Cache-Control directives
# Useful for: MCP requests, expensive API calls with aggressive no-cache headers
FETCH_CACHE_IGNORE_HEADERS=true

# Enable persistent cache (survives subprocess restarts)
# Default: true (cache persists to ~/.autosteer/cache/fetch-cache.json)
# Set to false for in-memory only cache (faster but lost on restart)
# Persistence uses hybrid TTL + LRU pruning strategy
FETCH_CACHE_PERSISTENCE_ENABLED=true

# Comma-separated URL patterns to include in cache
# Default: empty (cache everything)
# Uses substring matching, not regex
# Examples:
#   - api.anthropic.com (cache only Anthropic API)
#   - api.anthropic.com,api.openai.com (cache multiple APIs)
#   - (empty) = cache all non-excluded requests
# Note: Automatically excludes auth endpoints, SSE streams, errors, large responses
FETCH_CACHE_INCLUDES=.*

# Development Configuration
# Add other development environment variables below
